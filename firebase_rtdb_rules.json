{
  "rules": {
    "missions": {
      "$droneId": {
        "status": {
          ".read": "auth != null",
          ".write": "auth != null",
          "online": { ".validate": "newData.isBoolean()" },
          "last_seen": { ".validate": "newData.isNumber()" },
          "internet": { ".validate": "newData.isBoolean()" }
        },
        "active_command": {
          ".read": "auth != null",
          ".write": "auth != null",
          "status": {
            ".validate": "newData.isString() && (newData.val() == 'PENDING' || newData.val() == 'IN_PROGRESS' || newData.val() == 'COMPLETED' || newData.val() == 'FAILED' || newData.val() == 'ABORTED' || newData.val() == 'ABORT_REQUESTED' || newData.val() == 'EXPIRED_STALE' || newData.val() == 'CANCELLED')"
          },
          "telemetry": {
            ".read": "auth != null",
            ".write": "auth != null",
            "lat": {
              ".validate": "newData.isNumber()"
            },
            "lng": {
              ".validate": "newData.isNumber()"
            },
            "alt": {
              ".validate": "newData.isNumber()"
            },
            "heading": {
              ".validate": "newData.isNumber()"
            },
            "mode": {
              ".validate": "newData.isString()"
            },
            "updated_at": {
              ".validate": "newData.isNumber()"
            }
          },
          "payload": {
            ".read": "auth != null",
            ".write": "auth != null"
          },
          "id": {
            ".validate": "newData.isString()"
          },
          "type": {
            ".validate": "newData.isString()"
          },
          "timestamp": {
            ".validate": "newData.isNumber()"
          },
          "sender_uid": {
            ".validate": "newData.isString()"
          },
          "sender_email": {
            ".validate": "newData.isString()"
          },
          "started_at": {
            ".validate": "newData.isNumber()"
          },
          "completed_at": {
            ".validate": "newData.isNumber()"
          },
          "failed_at": {
            ".validate": "newData.isNumber()"
          },
          "aborted_at": {
            ".validate": "newData.isNumber()"
          }
        }
      }
    }
  }
}
